(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AppsEngineUIClient=void 0;const constants_1=require("./constants");const AppsEngineUIMethods_1=require("./definition/AppsEngineUIMethods");const utils_1=require("./utils");class AppsEngineUIClient{constructor(){this.listener=(()=>console.log("init"));this.callbacks=new Map}getUserInfo(){return this.call(AppsEngineUIMethods_1.AppsEngineUIMethods.GET_USER_INFO)}getRoomInfo(){return this.call(AppsEngineUIMethods_1.AppsEngineUIMethods.GET_ROOM_INFO)}init(){this.listener=(({data:data})=>{if(!data.hasOwnProperty(constants_1.MESSAGE_ID)){return}const{[constants_1.MESSAGE_ID]:{id:id,payload:payload}}=data;if(this.callbacks.has(id)){const resolve=this.callbacks.get(id);if(typeof resolve==="function"){resolve(payload)}this.callbacks.delete(id)}});window.addEventListener("message",this.listener)}call(action,payload){return new Promise(resolve=>{const id=utils_1.randomString(constants_1.ACTION_ID_LENGTH);window.parent.postMessage({[constants_1.MESSAGE_ID]:{action:action,payload:payload,id:id}},"*");this.callbacks.set(id,resolve)})}}exports.AppsEngineUIClient=AppsEngineUIClient},{"./constants":2,"./definition/AppsEngineUIMethods":3,"./utils":5}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MESSAGE_ID=exports.ACTION_ID_LENGTH=void 0;exports.ACTION_ID_LENGTH=80;exports.MESSAGE_ID="rc-apps-engine-ui"},{}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AppsEngineUIMethods=void 0;var AppsEngineUIMethods;(function(AppsEngineUIMethods){AppsEngineUIMethods["GET_USER_INFO"]="getUserInfo";AppsEngineUIMethods["GET_ROOM_INFO"]="getRoomInfo"})(AppsEngineUIMethods=exports.AppsEngineUIMethods||(exports.AppsEngineUIMethods={}))},{}],4:[function(require,module,exports){window.AppsEngineUIClient=require("./AppsEngineUIClient").AppsEngineUIClient},{"./AppsEngineUIClient":1}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.randomString=void 0;function randomString(length){const buffer=[];const chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<length;i++){buffer.push(chars[getRandomInt(chars.length)])}return buffer.join("")}exports.randomString=randomString;function getRandomInt(max){return Math.floor(Math.random()*Math.floor(max))}},{}]},{},[4]);
